# CurryDash Documentation - Development Guide

## Prerequisites

- **Node.js** 20.x or higher
- **npm** 10.x or higher
- **Git** for version control

## Installation

### 1. Clone the Repository

```bash
git clone https://github.com/CoralShades/currydash-docs.git
cd currydash-docs
```

### 2. Install Dependencies

```bash
cd docs
npm install
```

### 3. Start Development Server

```bash
npm run dev
```

Visit **http://localhost:3000** to view the documentation site.

## Available Scripts

| Command | Description |
|---------|-------------|
| `npm run dev` | Start development server with Turbopack |
| `npm run build` | Production build |
| `npm run postbuild` | Generate Pagefind search index |
| `npm run start` | Start production server |
| `npm run lint` | Run Next.js linting |
| `npm run docs:dev` | Alias for `npm run dev` |
| `npm run docs:build` | Build + generate search index |
| `npm run semantic-release` | Run semantic release |

## Project Structure for Development

### Adding Documentation

1. Create MDX files in `docs/content/`
2. Follow the existing folder structure by audience:
   - `/developers/` - Technical docs
   - `/vendors/` - Seller/restaurant guides
   - `/admins/` - Admin documentation
   - `/api/` - API reference

### MDX File Format

```mdx
---
title: Page Title
description: Brief description for SEO
---

# Page Title

Content goes here...
```

### Custom Components

Edit `docs/mdx-components.tsx` to customize MDX rendering.

## Environment Configuration

The project uses minimal environment configuration:

| File | Purpose |
|------|---------|
| `next.config.mjs` | Next.js + Nextra settings |
| `postcss.config.mjs` | Tailwind CSS v4 configuration |
| `tsconfig.json` | TypeScript compiler options |
| `.releaserc.json` | Semantic release settings |

## Build Process

### Development Build

```bash
npm run dev
```

Uses Turbopack for fast Hot Module Replacement (HMR).

### Production Build

```bash
npm run docs:build
```

This runs:
1. `next build` - Compile the application
2. `pagefind --site .next/server/app --output-path public/_pagefind` - Generate search index

### Static Export (for GitHub Pages)

```bash
NEXT_OUTPUT=export npm run docs:build
```

## Testing

### Link Validation

The CI/CD pipeline validates links using Lychee:

```bash
# Local validation (if lychee is installed)
lychee --verbose --no-progress './content/**/*.mdx'
```

### Manual Testing

1. Run the development server
2. Navigate through all documentation sections
3. Verify search functionality
4. Check responsive design at different breakpoints

## Code Quality

### Linting

```bash
npm run lint
```

### Commit Messages

Follow [Conventional Commits](https://www.conventionalcommits.org/):

```bash
# Feature (minor version)
git commit -m "feat(api): add authentication endpoints"

# Fix (patch version)
git commit -m "fix(docs): correct API example"

# Breaking change (major version)
git commit -m "feat(api)!: redesign endpoint structure

BREAKING CHANGE: All endpoints now use /v2/."
```

## Cross-Repository Integration

### How It Works

1. Developer commits to backend/mobile repo with story ID:
   ```
   feat: add feature (STORY-123)
   ```

2. Source repo workflow triggers `repository_dispatch`

3. This repo's `sync-from-repos.yml` creates:
   - Change spec in `.doc-changes/STORY-123.yaml`
   - Tracking issue for documentation updates

4. Developer runs `*paige ds` to apply changes

### BMAD Workflows

| Command | Purpose |
|---------|---------|
| `*paige di` | Initialize docs from planning artifacts |
| `*paige da STORY-123` | Analyze story for doc needs |
| `*paige ds` | Apply pending documentation changes |

## Troubleshooting

### Common Issues

**Build fails with CSS errors:**
- Ensure Tailwind CSS v4 is properly configured
- Check `postcss.config.mjs` uses `@tailwindcss/postcss`

**Search not working:**
- Run `npm run postbuild` to regenerate Pagefind index
- Ensure `.next/server/app` exists before indexing

**MDX parsing errors:**
- Validate frontmatter YAML syntax
- Check for unclosed JSX tags

### Getting Help

- Check existing documentation in `/docs/`
- Review GitHub Issues
- Consult CLAUDE.md for AI assistant guidance

---

*Generated by BMAD Document Project Workflow v1.2.0*
